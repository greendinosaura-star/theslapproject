<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>Friendly App</title>

<script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-app-compat.js"></script>
<script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-auth-compat.js"></script>
<script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-firestore-compat.js"></script>

<style>
body { font-family: Arial; max-width: 600px; margin: auto; padding: 20px; }
textarea { width: 100%; height: 60px; }
#feed div { border-bottom: 1px solid #ccc; padding: 5px; }
button { margin-top: 5px; }
</style>
</head>

<body>

<h1>Friendly App</h1>

<div id="auth">
<input type="email" id="email" placeholder="Email"><br>
<input type="password" id="password" placeholder="Password"><br>
<button onclick="signup()">Sign Up</button>
<button onclick="login()">Login</button>
</div>

<div id="app" style="display:none;">
<textarea id="postText" placeholder="Write something kind..."></textarea><br>
<button onclick="post()">Post</button>
<div id="feed"></div>
<button onclick="logout()">Logout</button>
</div>

<script>

// PASTE YOUR FIREBASE CONFIG BELOW
const firebaseConfig = {
  apiKey: "PASTE_HERE",
authDomain: "PASTE_HERE",
projectId: "PASTE_HERE",
apiKey: "PASTE_HERE",
authDomain: "PASTE_HERE",
projectId: "PASTE_HERE",
storageBucket: "PASTE_HERE",
messagingSenderId: "PASTE_HERE",
appId: "PASTE_HERE"
};

firebase.initializeApp(firebaseConfig);
const auth = firebase.auth();
const db = firebase.firestore();

function signup(){
const email = document.getElementById('email').value;
const password = document.getElementById('password').value;
auth.createUserWithEmailAndPassword(email,password)
.catch(e=>alert(e.message));
}

function login(){
const email = document.getElementById('email').value;
const password = document.getElementById('password').value;
auth.signInWithEmailAndPassword(email,password)
.catch(e=>alert(e.message));
}

function logout(){
auth.signOut();
}

auth.onAuthStateChanged(user=>{
if(user){
document.getElementById('auth').style.display='none';
document.getElementById('app').style.display='block';
loadFeed();
}else{
document.getElementById('auth').style.display='block';
document.getElementById('app').style.display='none';
}
});

function post(){
const text=document.getElementById('postText').value;
if(text){
db.collection('posts').add({
text:text,
user:auth.currentUser.email,
timestamp:firebase.firestore.FieldValue.serverTimestamp()
});
document.getElementById('postText').value="";
}
}

function loadFeed(){
db.collection('posts').orderBy('timestamp','desc')
.onSnapshot(snapshot=>{
const feed=document.getElementById('feed');
feed.innerHTML="";
snapshot.forEach(doc=>{
const data=doc.data();
const div=document.createElement('div');
div.textContent=data.user + ": " + data.text;
feed.appendChild(div);
});
});
}

</script>

</body>
</html>
